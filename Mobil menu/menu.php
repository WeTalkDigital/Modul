<?php
function mobile_fullscreen_shortcode() {
    // Enqueue the styles and scripts
    $css_path = plugin_dir_path(__FILE__) . 'mobile-fullscreen.css';
    $js_path = plugin_dir_path(__FILE__) . 'mobile-fullscreen.js';
    $css_ver = filemtime($css_path);
    $js_ver = filemtime($js_path);

    wp_enqueue_style('mobile-fullscreen', plugins_url('mobile-fullscreen.css', __FILE__), array(), $css_ver);
    wp_enqueue_script('mobile-fullscreen', plugins_url('mobile-fullscreen.js', __FILE__), array('jquery'), $js_ver, true);

    $current_lang = pll_current_language('slug');
    if ($current_lang == 'hu') {
        $links = array(
            'Filozófiánk' => 'https://aleli.hu/#filozofiank',
            'MENÜ' => 'https://aleli.hu/#menu',
            'GALÉRIA' => 'https://aleli.hu/#galeria',
            'Kapcsolat' => 'https://aleli.hu/#kapcsolat',
        );
    } else {
        $links = array(
            'Our philosophy' => 'https://aleli.hu/en/home/#ourphilosophy',
            'MENU' => 'https://aleli.hu/en/home/#menu',
            'Gallery' => 'https://aleli.hu/en/home/#gallery',
            'CONTACTS' => 'https://aleli.hu/en/home/#contact',
        );
    }

    $links_html = '<div class="links-container">';
    $links_html .= '<div class="svg-container">';
    $links_html .= '<svg xmlns="http://www.w3.org/2000/svg" width="82" height="40" viewBox="0 0 82 40" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M10.8644 4.4232C12.4683 4.74505 13.711 5.63586 14.676 6.93662C15.1243 7.541 15.3996 8.20936 15.5893 8.94624C16.0089 10.577 16.5076 12.1872 16.9788 13.8046C17.434 15.3672 17.8698 16.9361 18.3611 18.4873C18.8094 19.9034 19.3182 21.3002 19.8053 22.7037C20.1135 23.592 20.3976 24.4907 20.7518 25.3606C21.2004 26.4625 21.6877 27.5503 22.1989 28.6249C22.6318 29.5351 23.0998 30.4305 23.5916 31.3103C24.723 33.3346 26.1471 35.115 28.1618 36.3213C29.3093 37.0082 30.6028 37.3008 31.9397 37.4006C33.6818 37.5307 35.4104 37.3724 37.0879 36.954C39.4841 36.3562 41.8441 35.6141 44.2237 34.9478C46.9066 34.1967 49.5989 33.4853 52.4132 33.4554C54.6261 33.4321 56.7555 33.8053 58.7076 34.8997C59.3032 35.2337 59.8529 35.6539 60.4009 36.0647C60.5074 36.1446 60.5095 36.3641 60.5908 36.6163C59.9385 36.3329 59.445 36.0551 58.9155 35.9032C58.0561 35.6564 57.1824 35.4053 56.298 35.3118C54.4755 35.1189 52.6475 35.2067 50.83 35.4588C49.2711 35.6748 47.7044 35.8455 46.1542 36.1103C44.4924 36.3942 42.849 36.7824 41.1915 37.0927C38.8578 37.5297 36.5263 37.9891 34.1793 38.3424C31.8522 38.6924 29.4985 38.7857 27.1592 38.462C24.3741 38.0764 22.0571 36.8095 20.2855 34.5896C19.2396 33.2794 18.3224 31.8848 17.6453 30.3545C17.0046 28.9067 16.4333 27.4267 15.8799 25.9427C15.4342 24.7476 15.1376 23.491 14.6198 22.331C14.5868 22.2569 14.5571 22.1832 14.5303 22.1099L6.37513 22.1103C5.76321 24.0745 5.33269 25.4691 5.29513 25.632L5.29293 25.6426C5.23113 26.0124 5.13366 26.3812 5.03181 26.75L4.95508 27.0266C4.80195 27.58 4.65653 28.1338 4.62441 28.6915C4.58474 29.3815 4.83419 30.0866 5.60027 30.4161C5.67571 30.4485 5.77259 30.6171 5.74879 30.6573C5.6931 30.752 5.57327 30.8627 5.47436 30.8681C5.16736 30.8839 4.85816 30.8421 4.54981 30.8438C3.72162 30.848 2.89327 30.8747 2.06525 30.8667C1.8558 30.8645 1.64702 30.766 1.34998 30.6888C1.4985 30.5224 1.51976 30.4777 1.55386 30.4632C3.05411 29.823 3.64533 28.4877 4.16263 27.0853C4.26092 26.8191 5.69427 22.4151 7.20621 17.7542L7.30179 17.4596C7.34963 17.3121 7.39751 17.1645 7.44541 17.0167L7.64087 16.4139C8.71803 13.0914 9.77421 9.82651 10.3582 8.0128L10.353 8.03029C10.549 7.42641 10.4024 6.87226 10.2364 6.32078L10.1979 6.19355C10.1272 5.96029 10.0575 5.72686 10.0133 5.4897C9.94878 5.14371 9.92987 4.78927 9.89038 4.43873C9.96547 4.43674 10.0412 4.43153 10.1171 4.42545L10.269 4.41283C10.4715 4.39634 10.673 4.38487 10.8644 4.4232ZM61.9672 7.23132C61.9775 7.28144 61.988 7.33174 61.9985 7.38203C61.8638 7.53511 61.7478 7.71199 61.5909 7.83722C60.8928 8.3952 60.5689 9.12583 60.5656 10.0047C60.5571 12.2828 60.5539 14.5611 60.5524 16.8394C60.5505 20.1864 60.5617 23.5336 60.5487 26.8806C60.5406 28.9581 61.452 30.5095 63.2369 31.5078C64.3742 32.1437 65.575 32.6684 66.7615 33.2119C67.4877 33.5444 68.2292 33.8526 68.9846 34.1108C71.426 34.9457 73.9046 34.9506 76.3755 34.2828C77.7357 33.915 78.9531 33.2477 79.8893 32.151C79.9988 32.0227 80.0947 31.8833 80.1939 31.753C80.5082 31.9351 80.5428 32.1117 80.3782 32.3144C79.3926 33.5247 78.2564 34.5469 76.8295 35.2266C74.6182 36.2799 72.3078 36.408 69.9527 35.9371C68.7218 35.6912 67.5851 35.1444 66.4818 34.5527C66.2228 34.4137 65.9649 34.2724 65.7074 34.1304L65.3213 33.917C64.0988 33.2409 62.8753 32.5671 61.5624 32.073C59.7742 31.4001 57.9342 30.9717 56.0111 30.969C55.8845 30.9689 55.7473 30.9928 55.6341 30.9525C55.4771 30.8966 55.3379 30.7906 55.191 30.7061C55.2798 30.5832 55.3441 30.4251 55.4614 30.3432C56.1691 29.8489 56.3689 29.0934 56.4211 28.3208C56.4676 27.63 56.4689 26.9361 56.4647 26.2421L56.4612 25.7216C56.4601 25.5481 56.4593 25.3746 56.4594 25.2013C56.4619 20.5884 56.4721 15.9756 56.4481 11.3628C56.444 10.6264 56.2964 9.88819 56.1846 9.15554C56.1053 8.63537 55.8126 8.23064 55.404 7.8968C55.3109 7.82066 55.2327 7.72635 55.1574 7.62855L55.0676 7.51047C55.0376 7.47118 55.0072 7.43227 54.9759 7.39469C54.9855 7.3471 54.9951 7.2995 55.0047 7.25191C57.3254 7.16921 59.6462 7.19115 61.9672 7.23132ZM32.8911 7.29387C32.9056 7.33083 32.92 7.36779 32.9345 7.40475C32.7893 7.56745 32.6619 7.75159 32.4958 7.88897C31.9571 8.3342 31.6369 8.90045 31.6032 9.59091C31.5385 10.9091 31.4785 12.2289 31.4742 13.5484C31.4592 18.2712 31.47 22.9943 31.466 27.7173C31.4655 28.344 31.497 28.957 31.898 29.4802C32.3581 30.0807 32.9655 30.3406 33.7254 30.3354C35.9466 30.3204 38.1679 30.3404 40.389 30.3275C41.1333 30.3231 41.8862 30.321 42.6184 30.2083C43.3173 30.1008 43.9937 29.8475 44.6818 29.6658C44.8238 29.6282 44.9743 29.6235 45.1347 29.6554C44.7144 30.2556 44.1028 30.5053 43.4643 30.7185C41.9319 31.2299 40.3556 31.0935 38.7831 31.0645C35.0877 30.9961 31.3922 30.9433 27.6967 30.8876C27.5883 30.886 27.4799 30.8874 27.3714 30.8898L27.0461 30.898C26.8835 30.9016 26.7211 30.9031 26.559 30.8956C26.4256 30.8893 26.2968 30.7877 26.166 30.7298C26.2363 30.6108 26.2791 30.4554 26.3812 30.3789C26.9557 29.9482 27.3021 29.3919 27.3164 28.6701C27.3536 26.8015 27.3892 24.9327 27.3946 23.0638C27.406 19.1416 27.4006 15.2194 27.3932 11.2972C27.3924 10.7924 27.3456 10.2869 27.3061 9.78298C27.2452 9.00593 26.9238 8.35716 26.3277 7.84627C26.1693 7.71057 26.0298 7.55294 25.8817 7.40543C25.8941 7.36813 25.9068 7.331 25.9193 7.29387H32.8911ZM73.5369 7.33051L73.9724 7.33043C74.2628 7.33081 74.5531 7.33366 74.8427 7.34873C74.9457 7.35397 75.1138 7.44662 75.1273 7.52156C75.1477 7.63295 75.0942 7.81709 75.0073 7.8792C74.1946 8.4581 73.9148 9.29338 73.9033 10.2272C73.8765 12.3646 73.8805 14.5023 73.8798 16.6399C73.8788 20.2542 73.8825 23.8686 73.8878 27.4829C73.8888 28.1891 73.9055 28.9023 74.2982 29.5222C74.4883 29.8222 74.7546 30.0738 74.9836 30.3491C75.0651 30.4473 75.1396 30.5516 75.2172 30.653C75.0851 30.7368 74.9556 30.8883 74.8206 30.8932C74.0903 30.9194 73.3587 30.9096 72.6273 30.9116C72.346 30.9124 72.0648 30.9118 71.7835 30.9118V30.9143C70.8694 30.9143 69.9553 30.9167 69.0412 30.9119C68.8883 30.9113 68.7197 30.916 68.5867 30.8556C68.401 30.7715 68.2741 30.5921 68.5148 30.4426C69.4835 29.8409 69.7122 28.8471 69.7575 27.8527C69.8254 26.3627 69.8307 24.8694 69.8308 23.3765L69.8307 22.4809C69.8307 22.3316 69.8308 22.1824 69.8311 22.0331C69.8363 18.3346 69.841 14.6358 69.8093 10.9374C69.8019 10.0703 69.695 9.19042 69.161 8.44443C69.0479 8.28662 68.892 8.15971 68.7757 8.00359C68.6574 7.84511 68.5634 7.66857 68.4587 7.49979C68.6326 7.44274 68.8061 7.33776 68.9804 7.33625C70.4992 7.32376 72.0181 7.32882 73.5369 7.33051ZM41.0556 7.45393C42.4748 7.4752 43.8939 7.52735 45.3132 7.5287C46.6895 7.53005 48.0659 7.48111 49.4424 7.46052C49.7373 7.45613 50.0323 7.47604 50.3272 7.48853C50.6915 7.50406 50.8819 7.69511 50.9386 8.05781C51.0362 8.68229 51.1677 9.30153 51.2544 9.92718C51.2732 10.0622 51.1619 10.2153 51.1105 10.3601C51.0166 10.2717 50.8978 10.1984 50.8325 10.0922C50.0966 8.89798 48.9439 8.29022 47.6347 8.13967C46.0635 7.95891 44.4676 7.99149 42.8821 7.94018C42.5148 7.92819 42.2983 8.10811 42.2993 8.49815C42.3005 8.96178 42.303 9.42541 42.3018 9.88921C42.2966 11.9697 42.2818 14.0504 42.2932 16.1309L42.3399 16.8657C42.776 16.8594 43.4601 16.8753 44.1599 16.89L44.3543 16.8941C44.7754 16.9027 45.1944 16.9102 45.561 16.9114L45.7263 16.9114C46.1024 16.9105 46.4086 16.9014 46.582 16.8778C47.4089 16.765 47.7722 16.3653 48.08 15.5775C48.0986 15.5297 48.1406 15.4909 48.1961 15.4137C48.3498 15.645 48.27 16.3155 48.2698 17.0465C48.2696 17.8171 48.3405 18.649 48.1776 18.8632C48.0631 18.624 47.9847 18.3834 47.8458 18.1849C47.5366 17.7435 47.0983 17.4394 46.5747 17.3494C46.2265 17.2897 43.5472 17.3077 42.3573 17.2406L42.3626 17.2153C42.3063 17.4708 42.2983 17.7306 42.2959 18.0495C42.2785 20.4392 42.2863 22.829 42.2858 25.219C42.2858 25.3174 42.2804 25.4158 42.2829 25.5142C42.3 26.1763 42.4335 26.2982 43.0885 26.2911C43.9319 26.2818 44.7754 26.2826 45.619 26.2809C46.9106 26.2782 48.1661 26.1084 49.3314 25.501C49.9702 25.1679 50.4758 24.7005 50.8424 24.0774C50.9018 23.9765 51.033 23.9179 51.131 23.8398C51.1421 23.8677 51.1563 23.8961 51.1713 23.9246L51.2017 23.9817C51.2419 24.0578 51.2776 24.1331 51.2666 24.2009C51.151 24.9214 51.0158 25.6391 50.8725 26.3545C50.8088 26.672 50.5523 26.7038 50.2823 26.7034C49.2561 26.7012 48.2298 26.7044 47.2034 26.7038C44.2656 26.702 41.3273 26.7017 38.3894 26.6921C38.1444 26.6912 37.8995 26.6256 37.6546 26.59L37.66 26.4597C37.8196 26.3287 37.9818 26.2008 38.1383 26.0661C38.6762 25.6033 38.8428 24.9606 38.9434 24.3047C39.0132 23.8485 39.035 23.381 39.0347 22.9186C39.0328 18.8274 39.0326 14.7361 39.0013 10.6452C38.996 9.979 38.8704 9.30794 38.739 8.65157C38.6914 8.41343 38.4596 8.2141 38.3202 7.99182C38.246 7.87334 38.1893 7.74389 38.1246 7.61916C38.2583 7.56043 38.3911 7.45258 38.5255 7.45056C39.3687 7.43807 40.2124 7.44144 41.0556 7.45393ZM10.6215 8.49149L10.5957 8.57542C10.0837 10.2403 9.27244 12.8393 8.43693 15.5118L8.30933 15.92L8.13551 16.4758C7.56887 18.2879 7.00627 20.0862 6.53292 21.6041L14.3805 21.6036C14.3171 21.341 14.2699 21.0783 14.2073 20.8092C13.9312 19.6215 13.5478 18.4588 13.2116 17.2848C12.9024 16.2055 12.5915 15.1267 12.2934 14.0443C11.9135 12.664 11.5419 11.2818 11.1758 9.8978C11.0862 9.55873 11.059 9.20126 10.9505 8.86978C10.9023 8.72251 10.7621 8.55397 10.6215 8.49149ZM74.3741 1.54642C74.5254 1.69174 74.687 1.82608 74.8408 1.96887C75.0985 2.20819 75.0626 2.50001 74.7443 2.62473C73.8391 2.97984 73.1051 3.5844 72.3886 4.21579C71.9586 4.59486 71.5358 4.9822 71.1051 5.36026C71.0396 5.41781 70.9485 5.44566 70.8693 5.48735C70.8394 5.4649 70.8096 5.44229 70.7797 5.41984C70.8447 5.28533 70.8894 5.13579 70.9777 5.019C71.6347 4.14659 72.3012 3.28127 72.9632 2.41258C73.1665 2.14575 73.3657 1.8757 73.5657 1.60634C73.8033 1.28583 74.083 1.26676 74.3741 1.54642Z" fill="#36473A"/>
      </svg>';
    $links_html .= '</div>';
    $last_key = end(array_keys($links));
    foreach ($links as $name => $url) {
        $links_html .= '<a href="' . $url . '" class="link">' . $name . '</a>';
        if ($name != $last_key) {
            $links_html .= '<hr class="dotted-line">';
        }
        $links_html .= '<br>';
    }

    // Language switcher
    $links_html .= '<hr class="grey-linee">';
    $links_html .= '<div class="language-switcher">';
    if (function_exists('pll_the_languages')) {
        $links_html .= pll_the_languages(array(
            'show_flags' => 0,
            'show_names' => 0,
            'hide_if_no_translation' => 0,
            'display_names_as' => 'slug',
            'echo' => 0 // Ensure it returns the string rather than echoing it directly
        ));
    }
    $links_html .= '</div>';

    $links_html .= '</div>'; // Close links-container

    return '<button class="mobilgomb" id="mobile-fullscreen-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
        <rect y="0.894775" width="4.8" height="4.77827" rx="2.38913" fill="#36473A"/>
        <rect x="9.59961" y="0.894775" width="4.8" height="4.77827" rx="2.38913" fill="#36473A"/>
        <rect x="19.2002" y="0.894775" width="4.8" height="4.77827" rx="2.38913" fill="#36473A"/>
        <rect y="10.4526" width="4.8" height="4.77828" rx="2.38914" fill="#36473A"/>
        <rect x="9.59961" y="10.4526" width="4.8" height="4.77828" rx="2.38914" fill="#36473A"/>
        <rect x="19.2002" y="10.4526" width="4.8" height="4.77828" rx="2.38914" fill="#36473A"/>
        <rect y="20.0105" width="4.8" height="4.77827" rx="2.38914" fill="#36473A"/>
        <rect x="9.59961" y="20.0105" width="4.8" height="4.77827" rx="2.38914" fill="#36473A"/>
        <rect x="19.2002" y="20.0105" width="4.8" height="4.77827" rx="2.38914" fill="#36473A"/>
      </svg></button><div id="mobile-fullscreen-modal" style="display: none;"><a href="#" id="close-modal"><svg id="fi_6583137" enable-background="new 0 0 48 48" height="512" viewBox="0 0 48 48" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m32.5 33c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3s-.5-.1-.7-.3l-8.4-8.4-8.4 8.4c-.2.2-.5.3-.7.3s-.5-.1-.7-.3c-.4-.4-.4-1 0-1.4l8.4-8.4-8.4-8.4c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l8.4 8.4 8.4-8.4c.4-.4 1-.4 1.4 0s.4 1 0 1.4l-8.4 8.4z"></path></svg></a>' . $links_html . '</div>';
}
add_shortcode('mobile_fullscreen', 'mobile_fullscreen_shortcode');
?>